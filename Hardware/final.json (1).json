{"mode":"block","xmlText":"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables><variable id=\"(F)aR2?[=OEZF:SfGw-g\">temp</variable><variable id=\"Vebk(Z-ptd(}@%`?$L8m\">cmd</variable><variable id=\"i]a1{$X6.+KEp!yX|Xc`\">light</variable><variable id=\"-^3,6O^CcY,kaCJ5PB%$\">humid</variable></variables><block type=\"yolobit_events_timer\" id=\"~*A]g72kp`DVy!SSk-b-\" x=\"-938\" y=\"-613\"><value name=\"INTERVAL\"><shadow type=\"math_number\" id=\"j@fCy|faUv?]`F,~Y/i|\"><field name=\"NUM\">60</field></shadow></value><statement name=\"ACTION\"><block type=\"aiot_dht_measure\" id=\".91i25n`F@B;UmS_grk~\"><next><block type=\"variables_set\" id=\"!3r?p8zZmk;LVu?1?mK@\"><field name=\"VAR\" id=\"(F)aR2?[=OEZF:SfGw-g\">temp</field><value name=\"VALUE\"><block type=\"aiot_dht_read\" id=\"PyU6}5l6`5R1s_[1PU=J\"><field name=\"DATA\">TEMP</field></block></value><next><block type=\"variables_set\" id=\"gfNgj/v[[!Dt$y]+a7Bm\"><field name=\"VAR\" id=\"-^3,6O^CcY,kaCJ5PB%$\">humid</field><value name=\"VALUE\"><block type=\"aiot_dht_read\" id=\"E*ElUZ7RYa,l:,ZMgygs\"><field name=\"DATA\">HUMID</field></block></value><next><block type=\"variables_set\" id=\"gh(`7vDu;JZF/IUgr*/2\"><field name=\"VAR\" id=\"i]a1{$X6.+KEp!yX|Xc`\">light</field><value name=\"VALUE\"><block type=\"aiot_light_sensor\" id=\"Td/i@;03vWsr~+yDggUH\"><field name=\"NAME\">pin0</field></block></value><next><block type=\"xbot_serial_write_string\" id=\"pJV6NptP:3]rQW~C;k/}\"><value name=\"string\"><shadow type=\"text\" id=\"Zc9|u}3~q9,w~~UwCdvy\"><field name=\"TEXT\"> </field></shadow><block type=\"text_join\" id=\"gLD?w8+I`8vzxy68pnp+\"><mutation items=\"2\"></mutation><value name=\"ADD0\"><block type=\"text_join\" id=\"|+h238~c*TSLRHPkffM2\"><mutation items=\"2\"></mutation><value name=\"ADD0\"><block type=\"text\" id=\"`t:[T:Z/93}#i+a[.yc4\"><field name=\"TEXT\">!1:TEMP:</field></block></value><value name=\"ADD1\"><block type=\"variables_get\" id=\"Xdh8ADo]N7C`ll/#W[+G\"><field name=\"VAR\" id=\"(F)aR2?[=OEZF:SfGw-g\">temp</field></block></value></block></value><value name=\"ADD1\"><block type=\"text\" id=\"q00@PH46n0.Zcg0N[CZd\"><field name=\"TEXT\">#</field></block></value></block></value><next><block type=\"xbot_serial_write_string\" id=\"5mKe21NHL52p(4exm:5(\"><value name=\"string\"><shadow type=\"text\" id=\"Zc9|u}3~q9,w~~UwCdvy\"><field name=\"TEXT\"> </field></shadow><block type=\"text_join\" id=\"Zk41)dSNwu))*ftI)Lcx\"><mutation items=\"2\"></mutation><value name=\"ADD0\"><block type=\"text_join\" id=\"}Esv@GZ`|{m3[zH|ttR^\"><mutation items=\"2\"></mutation><value name=\"ADD0\"><block type=\"text\" id=\"TKr|pHv9LwRx1)C;O-VW\"><field name=\"TEXT\">!2:HUMID:</field></block></value><value name=\"ADD1\"><block type=\"variables_get\" id=\"cUY{Qm,C[pdV@#w7%p?)\"><field name=\"VAR\" id=\"-^3,6O^CcY,kaCJ5PB%$\">humid</field></block></value></block></value><value name=\"ADD1\"><block type=\"text\" id=\"Ud|`d{)a|5];!XzK4p/W\"><field name=\"TEXT\">#</field></block></value></block></value><next><block type=\"xbot_serial_write_string\" id=\"*^rG[ih*jk*.2WD25lL8\"><value name=\"string\"><shadow type=\"text\" id=\"Zc9|u}3~q9,w~~UwCdvy\"><field name=\"TEXT\"> </field></shadow><block type=\"text_join\" id=\"DLygbxE`C~wzK972:+[8\"><mutation items=\"2\"></mutation><value name=\"ADD0\"><block type=\"text_join\" id=\"u1eI|54/iTPldGL{0c5(\"><mutation items=\"2\"></mutation><value name=\"ADD0\"><block type=\"text\" id=\"u[B0XXxy3-[qb3T$,3gE\"><field name=\"TEXT\">!3:LIGHT:</field></block></value><value name=\"ADD1\"><block type=\"variables_get\" id=\"w2|Vk|He~$Q,wDeBHWGQ\"><field name=\"VAR\" id=\"i]a1{$X6.+KEp!yX|Xc`\">light</field></block></value></block></value><value name=\"ADD1\"><block type=\"text\" id=\".=b41RtL2KwAZR!F!,b8\"><field name=\"TEXT\">#</field></block></value></block></value></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"yolobit_basic_forever\" id=\"w5Bl*-!,Ihc8X2tI)wP*\" x=\"-112\" y=\"-462\"><statement name=\"ONSTART\"><block type=\"variables_set\" id=\"tCg2l#`0]KG-sOULrn|i\"><field name=\"VAR\" id=\"(F)aR2?[=OEZF:SfGw-g\">temp</field><value name=\"VALUE\"><block type=\"math_number\" id=\"?,T{FqWuiIQMAxl[@C%~\"><field name=\"NUM\">0</field></block></value><next><block type=\"variables_set\" id=\"vdla+KAB`t!VX$%v=FUO\"><field name=\"VAR\" id=\"i]a1{$X6.+KEp!yX|Xc`\">light</field><value name=\"VALUE\"><block type=\"math_number\" id=\"~jdUqx{5w;i:%KG/E@Rt\"><field name=\"NUM\">0</field></block></value><next><block type=\"yolobit_basic_show_image\" id=\"kuWUt?43^bE~wkx8|V9c\"><value name=\"image\"><block type=\"yolobit_basic_image_builtins\" id=\"}!QSG)E5m4/5AGQ|LvYG\"><field name=\"image\">HEART</field></block></value></block></next></block></next></block></statement><statement name=\"FOREVER\"><block type=\"yolobit_events_run\" id=\"Yf1cl*}OU!H[n/5@{|TF\"><next><block type=\"yolobit_basic_sleep\" id=\"oJ/Lyym-a6Xy|8P+5dmL\"><value name=\"duration\"><shadow type=\"math_number\" id=\"8$bBmMIRf^W.,hHNs~oQ\"><field name=\"NUM\">1000</field></shadow></value></block></next></block></statement></block><block type=\"yolobit_events_timer\" id=\"7^3D1G`CIpUZ31)+hL]6\" x=\"-931\" y=\"-168\"><value name=\"INTERVAL\"><shadow type=\"math_number\" id=\"Oo9n6Dd~h-%W[KLtm4R`\"><field name=\"NUM\">0.2</field></shadow></value><statement name=\"ACTION\"><block type=\"variables_set\" id=\"$}~Nz$4SdSUCT!hP*Wy{\"><field name=\"VAR\" id=\"Vebk(Z-ptd(}@%`?$L8m\">cmd</field><value name=\"VALUE\"><block type=\"yolobit_device_read_terminal\" id=\"BzYZbUjUq?qI/|g^7dhW\"></block></value><next><block type=\"controls_if\" id=\"v/I*vSQG,C=BU)tcpGi9\"><value name=\"IF0\"><block type=\"logic_compare\" id=\"?5kl!;@7tuz;dpz$agJ-\"><field name=\"OP\">EQ</field><value name=\"A\"><block type=\"variables_get\" id=\"cj(=MrjOrL-yRh.f0;v$\"><field name=\"VAR\" id=\"Vebk(Z-ptd(}@%`?$L8m\">cmd</field></block></value><value name=\"B\"><block type=\"text\" id=\"V^GHjX`[OSW;q$}pVd9Q\"><field name=\"TEXT\">a</field></block></value></block></value><statement name=\"DO0\"><block type=\"aiot_minifan\" id=\"_eRV60u5fSZqe.U=w5Hs\"><field name=\"NAME\">pin1</field><value name=\"percent\"><shadow type=\"math_number\" id=\"t3EO}}Qo=%KEDAY$FN{,\"><field name=\"NUM\">70</field></shadow></value></block></statement><next><block type=\"controls_if\" id=\"t@umeBEhShUd.2/R(Mon\"><value name=\"IF0\"><block type=\"logic_compare\" id=\"/+~g4*N1C((G[[RaEevC\"><field name=\"OP\">EQ</field><value name=\"A\"><block type=\"variables_get\" id=\"Ly?+rZUj)N4Rz)(gp]Bm\"><field name=\"VAR\" id=\"Vebk(Z-ptd(}@%`?$L8m\">cmd</field></block></value><value name=\"B\"><block type=\"text\" id=\"CZ7,C9H4gYMukvs!6+:z\"><field name=\"TEXT\">b</field></block></value></block></value><statement name=\"DO0\"><block type=\"aiot_minifan\" id=\"9SB=8gH^HOOG(n#zfJu7\"><field name=\"NAME\">pin1</field><value name=\"percent\"><shadow type=\"math_number\" id=\"nAncgFO_3mwZ@*OR4Bjp\"><field name=\"NUM\">0</field></shadow></value></block></statement><next><block type=\"controls_if\" id=\"|,pq*gQWpoiFf:AWjg)T\"><value name=\"IF0\"><block type=\"logic_compare\" id=\"gO#H1|T:BGU0AMm!u!^t\"><field name=\"OP\">EQ</field><value name=\"A\"><block type=\"variables_get\" id=\"M;zuALc}X5U:{Mdb`7VT\"><field name=\"VAR\" id=\"Vebk(Z-ptd(}@%`?$L8m\">cmd</field></block></value><value name=\"B\"><block type=\"text\" id=\"V`hbW(oGNT`JTR.mF)s+\"><field name=\"TEXT\">c</field></block></value></block></value><statement name=\"DO0\"><block type=\"aiot_led_tiny_set_all\" id=\"E*jNkN7h@rhi`Y!Lw`@%\"><field name=\"port\">pin2</field><field name=\"option\">0</field><value name=\"COLOR\"><shadow type=\"colour_picker\" id=\"xq0-[}ECI;w!(ItEgEdz\"><field name=\"COLOUR\">#ff0000</field></shadow></value></block></statement><next><block type=\"controls_if\" id=\"J,7Dw)Y-`]ET6yMt(;mk\"><value name=\"IF0\"><block type=\"logic_compare\" id=\"Sc7is@K!q/4VK/Bw@lC3\"><field name=\"OP\">EQ</field><value name=\"A\"><block type=\"variables_get\" id=\"gbM9|w#)}]K]@ZzPnWIU\"><field name=\"VAR\" id=\"Vebk(Z-ptd(}@%`?$L8m\">cmd</field></block></value><value name=\"B\"><block type=\"text\" id=\"#;~5u5uh1fvY[5H7H/fS\"><field name=\"TEXT\">d</field></block></value></block></value><statement name=\"DO0\"><block type=\"aiot_led_tiny_set_all\" id=\"RR8ta__]UGTV^DX,{t!^\"><field name=\"port\">pin2</field><field name=\"option\">0</field><value name=\"COLOR\"><shadow type=\"colour_picker\" id=\"-@*nY#}H5;}TAgLA_f^E\"><field name=\"COLOUR\">#000000</field></shadow></value></block></statement></block></next></block></next></block></next></block></next></block></statement></block></xml>","python":"from event_manager import *\nfrom machine import Pin, SoftI2C\nfrom aiot_dht20 import DHT20\nfrom yolobit import *\nbutton_a.on_pressed = None\nbutton_b.on_pressed = None\nbutton_a.on_pressed_ab = button_b.on_pressed_ab = -1\nimport time\nimport sys\nimport uselect\nfrom aiot_rgbled import RGBLed\n\nevent_manager.reset()\n\naiot_dht20 = DHT20(SoftI2C(scl=Pin(22), sda=Pin(21)))\n\ndef on_event_timer_callback_A_g_k_p_D():\n  global temp, cmd, light, humid\n  aiot_dht20.read_dht20()\n  temp = aiot_dht20.dht20_temperature()\n  humid = aiot_dht20.dht20_humidity()\n  light = round(translate((pin0.read_analog()), 0, 4095, 0, 100))\n  print((str('!1:TEMP:' + str(temp)) + '#'), end =' ')\n  print((str('!2:HUMID:' + str(humid)) + '#'), end =' ')\n  print((str('!3:LIGHT:' + str(light)) + '#'), end =' ')\n\nevent_manager.add_timer_event(60000, on_event_timer_callback_A_g_k_p_D)\n\ndef read_terminal_input():\n  spoll=uselect.poll()        # Set up an input polling object.\n  spoll.register(sys.stdin, uselect.POLLIN)    # Register polling object.\n\n  input = ''\n  if spoll.poll(0):\n    input = sys.stdin.read(1)\n\n    while spoll.poll(0):\n      input = input + sys.stdin.read(1)\n\n  spoll.unregister(sys.stdin)\n  return input\n\ntiny_rgb = RGBLed(pin2.pin, 4)\n\ndef on_event_timer_callback_D_G_C_I_p():\n  global temp, cmd, light, humid\n  cmd = read_terminal_input()\n  if cmd == 'a':\n    pin1.write_analog(round(translate(70, 0, 100, 0, 1023)))\n  if cmd == 'b':\n    pin1.write_analog(round(translate(0, 0, 100, 0, 1023)))\n  if cmd == 'c':\n    tiny_rgb.show(0, hex_to_rgb('#ff0000'))\n  if cmd == 'd':\n    tiny_rgb.show(0, hex_to_rgb('#000000'))\n\nevent_manager.add_timer_event(200, on_event_timer_callback_D_G_C_I_p)\n\nif True:\n  temp = 0\n  light = 0\n  display.show(Image.HEART)\n\nwhile True:\n  event_manager.run()\n  time.sleep_ms(1000)\n","name":"final","extensions":[{"id":"yolobit-AITT-VN-yolobit_extension_aiot","src":"https://github.com/AITT-VN/yolobit_extension_aiot","name":"AIOT Kit","description":"Mục mở rộng dành cho bộ kit AIoT"},{"id":"yolobit-AITT-VN-yolobit_extension_aiot","src":"https://github.com/AITT-VN/yolobit_extension_aiot","name":"AIOT Kit","description":"Mục mở rộng dành cho bộ kit AIoT"},{"id":"yolobit-AITT-VN-yolobit_extension_aiot","src":"https://github.com/AITT-VN/yolobit_extension_aiot","name":"AIOT Kit","description":"Mục mở rộng dành cho bộ kit AIoT"},{"id":"yolobit-AITT-VN-yolobit_extension_aiot","src":"https://github.com/AITT-VN/yolobit_extension_aiot","name":"AIOT Kit","description":"Mục mở rộng dành cho bộ kit AIoT"},{"id":"yolobit-AITT-VN-yolobit_extension_aiot","src":"https://github.com/AITT-VN/yolobit_extension_aiot","name":"AIOT Kit","description":"Mục mở rộng dành cho bộ kit AIoT"},{"id":"yolobit-AITT-VN-yolobit_extension_events","src":"https://github.com/AITT-VN/yolobit_extension_events","name":"SỰ KIỆN","description":"Mục mở rộng hỗ trợ sử dụng sự kiện trong chương trình"},{"id":"yolobit-AITT-VN-yolobit_extension_events","src":"https://github.com/AITT-VN/yolobit_extension_events","name":"SỰ KIỆN","description":"Mục mở rộng hỗ trợ sử dụng sự kiện trong chương trình"}],"device":"yolobit"}